

<!DOCTYPE html>

<html>
    <head>
        <link rel="stylesheet" href="books_ajax.css">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            // given a url of the api with the search term at the end gets the book data
            function get_book_data(url) {
                result = fetch(url)
                    .then(res => res.json())
                    .then(data => {
                        message = ("<h1>Book you are searching for is: <b>Lord of the Rings</b>.</h1>") +
                            ("<h2>There were a total of " + data.totalItems + " results for your search.</h2>");
                        $('body').append(message);
                        list = data.items;
                        list.forEach(function (item) {
                            volumeInfo = item.volumeInfo;
                            if (volumeInfo.hasOwnProperty("title") && volumeInfo.hasOwnProperty("publishedDate")) {
                                bookDiv = $('<div class="book"></div>');
                                titleDiv = $('<div class="title"></div>').text("Title: " + volumeInfo.title);
                                if (volumeInfo.hasOwnProperty("authors"))
                                    authorDiv = $('<div class="author"></div>').text("Author: " + volumeInfo.authors.join(", "));
                                else
                                    authorDiv = $('<div class="author"></div>').text("Author: " + "unknown");
                                pubDiv = $('<div class="pubDiv"></div>').text("Published first in: " + volumeInfo.publishedDate);
                                if (volumeInfo.hasOwnProperty("industryIdentifiers") && volumeInfo.industryIdentifiers.length > 0)
                                    isbnDiv = $('<div class="isbn"></div>').text("ISBN: " + volumeInfo.industryIdentifiers[0].identifier);
                                else
                                    isbnDiv = $('<div class="isbn"></div>').text("ISBN: " + "unknown");
                                
                                // Adding book image
                                if (volumeInfo.hasOwnProperty("imageLinks")) {
                                    imageDiv = $('<img>').attr('src', volumeInfo.imageLinks.thumbnail).addClass('bookImage');
                                    bookDiv.append(imageDiv);
                                }
                                
                                bookDiv.append(titleDiv, authorDiv, pubDiv, isbnDiv);
                                $('body').append(bookDiv);
                            }
                        })
                        assignmentInfo = "I used the Google Books API. It contains books and related information such as author, ISBN, etc.<br>";
                        assignmentInfo += 'I found it online using the resources on developers.google.com at: <a href="https://developers.google.com/books/docs/v1/using#WorkingVolumes" target="_blank">https://developers.google.com/books/docs/v1/using#WorkingVolumes</a>';
                        assignmentInfo += 'I offered a book series name to search the API ("Lord+of+the+Rings").<br>';
                        assignmentInfo += "This could be useful for a library or book selling website. It could also be useful for a school or even looking through banned book lists as they have categories that books are sorted into."

                        $('body').append(assignmentInfo);
                    })
                    .catch(error => console.log(error))
            }

            $(document).ready(function () {
                get_book_data("https://www.googleapis.com/books/v1/volumes?q=Lord+of+the+Rings");
            });

        </script>
    </head>
    <body>
    </body>
</html>
